(function(E,p){typeof exports=="object"&&typeof module!="undefined"?p(exports):typeof define=="function"&&define.amd?define(["exports"],p):(E=typeof globalThis!="undefined"?globalThis:E||self,p(E.quickv={}))})(this,function(E){var me,ge,ve;"use strict";var Ke=Object.defineProperty;var ye=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var Ee=(E,p,$)=>p in E?Ke(E,p,{enumerable:!0,configurable:!0,writable:!0,value:$}):E[p]=$,S=(E,p)=>{for(var $ in p||(p={}))Je.call(p,$)&&Ee(E,$,p[$]);if(ye)for(var $ of ye(p))Xe.call(p,$)&&Ee(E,$,p[$]);return E};const p={invalidClass:"is-invalid",validClass:""},$=t=>{const e=/^(\w+):(.+)$/,s=t.match(e);if(s){const i=s[1];let l=s[2];return{ruleName:i,params:l}}else{const[i,l]=t.split(":");return{ruleName:i,params:l}}},k=(t,e=",")=>typeof t!="string"?[]:t.split(e).map(s=>s.trim()),F=t=>{throw new Error(`Please provide <<${t}>> rule arguments`)},R=t=>t instanceof File||t instanceof Blob,H=(t,e)=>{if(R(t)){const i=t.size;let l;const c=e==null?void 0:e.match(/^(\d+(\.\d+)?)\s*(B|KB|MB|GB)$/i);if(!c)throw new Error("Invalid maxSize format. Please use valid format like '1KB', '1MB', etc.");const o=parseFloat(c[1]),b=c[3].toUpperCase();return b==="KB"?l=o*1024:b==="MB"?l=o*1024*1024:b==="GB"?l=o*1024*1024*1024:l=o,i<=l}else return!1},J=(t,e)=>{if(R(t)){const i=t.size;let l;const c=e==null?void 0:e.match(/^(\d+(\.\d+)?)\s*(B|KB|MB|GB)$/i);if(!c)throw new Error("Invalid minSize format. Please use valid format like '1KB', '1MB', etc.");const o=parseFloat(c[1]),b=c[3].toUpperCase();return b==="KB"?l=o*1024:b==="MB"?l=o*1024*1024:b==="GB"?l=o*1024*1024*1024:l=o,i>=l}else return!1};var Me=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function $e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ne={exports:{}};(function(t,e){(function(s,i){t.exports=i()})(Me,function(){var s=1e3,i=6e4,l=36e5,c="millisecond",o="second",b="minute",D="hour",C="day",U="week",q="month",pe="quarter",A="year",V="date",be="Invalid Date",Ye=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Ze={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var a=["th","st","nd","rd"],r=u%100;return"["+u+(a[(r-20)%10]||a[r]||a[0])+"]"}},se=function(u,a,r){var h=String(u);return!h||h.length>=a?u:""+Array(a+1-h.length).join(r)+u},Ge={s:se,z:function(u){var a=-u.utcOffset(),r=Math.abs(a),h=Math.floor(r/60),n=r%60;return(a<=0?"+":"-")+se(h,2,"0")+":"+se(n,2,"0")},m:function u(a,r){if(a.date()<r.date())return-u(r,a);var h=12*(r.year()-a.year())+(r.month()-a.month()),n=a.clone().add(h,q),d=r-n<0,f=a.clone().add(h+(d?-1:1),q);return+(-(h+(r-n)/(d?n-f:f-n))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:q,y:A,w:U,d:C,D:V,h:D,m:b,s:o,ms:c,Q:pe}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},z="en",x={};x[z]=Ze;var ie=function(u){return u instanceof G},Z=function u(a,r,h){var n;if(!a)return z;if(typeof a=="string"){var d=a.toLowerCase();x[d]&&(n=d),r&&(x[d]=r,n=d);var f=a.split("-");if(!n&&f.length>1)return u(f[0])}else{var m=a.name;x[m]=a,n=m}return!h&&n&&(z=n),n||!h&&z},y=function(u,a){if(ie(u))return u.clone();var r=typeof a=="object"?a:{};return r.date=u,r.args=arguments,new G(r)},g=Ge;g.l=Z,g.i=ie,g.w=function(u,a){return y(u,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var G=function(){function u(r){this.$L=Z(r.locale,null,!0),this.parse(r)}var a=u.prototype;return a.parse=function(r){this.$d=function(h){var n=h.date,d=h.utc;if(n===null)return new Date(NaN);if(g.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var f=n.match(Ye);if(f){var m=f[2]-1||0,w=(f[7]||"0").substring(0,3);return d?new Date(Date.UTC(f[1],m,f[3]||1,f[4]||0,f[5]||0,f[6]||0,w)):new Date(f[1],m,f[3]||1,f[4]||0,f[5]||0,f[6]||0,w)}}return new Date(n)}(r),this.$x=r.x||{},this.init()},a.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},a.$utils=function(){return g},a.isValid=function(){return this.$d.toString()!==be},a.isSame=function(r,h){var n=y(r);return this.startOf(h)<=n&&n<=this.endOf(h)},a.isAfter=function(r,h){return y(r)<this.startOf(h)},a.isBefore=function(r,h){return this.endOf(h)<y(r)},a.$g=function(r,h,n){return g.u(r)?this[h]:this.set(n,r)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(r,h){var n=this,d=!!g.u(h)||h,f=g.p(r),m=function(W,_){var L=g.w(n.$u?Date.UTC(n.$y,_,W):new Date(n.$y,_,W),n);return d?L:L.endOf(C)},w=function(W,_){return g.w(n.toDate()[W].apply(n.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(_)),n)},v=this.$W,M=this.$M,O=this.$D,N="set"+(this.$u?"UTC":"");switch(f){case A:return d?m(1,0):m(31,11);case q:return d?m(1,M):m(0,M+1);case U:var j=this.$locale().weekStart||0,P=(v<j?v+7:v)-j;return m(d?O-P:O+(6-P),M);case C:case V:return w(N+"Hours",0);case D:return w(N+"Minutes",1);case b:return w(N+"Seconds",2);case o:return w(N+"Milliseconds",3);default:return this.clone()}},a.endOf=function(r){return this.startOf(r,!1)},a.$set=function(r,h){var n,d=g.p(r),f="set"+(this.$u?"UTC":""),m=(n={},n[C]=f+"Date",n[V]=f+"Date",n[q]=f+"Month",n[A]=f+"FullYear",n[D]=f+"Hours",n[b]=f+"Minutes",n[o]=f+"Seconds",n[c]=f+"Milliseconds",n)[d],w=d===C?this.$D+(h-this.$W):h;if(d===q||d===A){var v=this.clone().set(V,1);v.$d[m](w),v.init(),this.$d=v.set(V,Math.min(this.$D,v.daysInMonth())).$d}else m&&this.$d[m](w);return this.init(),this},a.set=function(r,h){return this.clone().$set(r,h)},a.get=function(r){return this[g.p(r)]()},a.add=function(r,h){var n,d=this;r=Number(r);var f=g.p(h),m=function(M){var O=y(d);return g.w(O.date(O.date()+Math.round(M*r)),d)};if(f===q)return this.set(q,this.$M+r);if(f===A)return this.set(A,this.$y+r);if(f===C)return m(1);if(f===U)return m(7);var w=(n={},n[b]=i,n[D]=l,n[o]=s,n)[f]||1,v=this.$d.getTime()+r*w;return g.w(v,this)},a.subtract=function(r,h){return this.add(-1*r,h)},a.format=function(r){var h=this,n=this.$locale();if(!this.isValid())return n.invalidDate||be;var d=r||"YYYY-MM-DDTHH:mm:ssZ",f=g.z(this),m=this.$H,w=this.$m,v=this.$M,M=n.weekdays,O=n.months,N=function(_,L,re,K){return _&&(_[L]||_(h,d))||re[L].slice(0,K)},j=function(_){return g.s(m%12||12,_,"0")},P=n.meridiem||function(_,L,re){var K=_<12?"AM":"PM";return re?K.toLowerCase():K},W={YY:String(this.$y).slice(-2),YYYY:this.$y,M:v+1,MM:g.s(v+1,2,"0"),MMM:N(n.monthsShort,v,O,3),MMMM:N(O,v),D:this.$D,DD:g.s(this.$D,2,"0"),d:String(this.$W),dd:N(n.weekdaysMin,this.$W,M,2),ddd:N(n.weekdaysShort,this.$W,M,3),dddd:M[this.$W],H:String(m),HH:g.s(m,2,"0"),h:j(1),hh:j(2),a:P(m,w,!0),A:P(m,w,!1),m:String(w),mm:g.s(w,2,"0"),s:String(this.$s),ss:g.s(this.$s,2,"0"),SSS:g.s(this.$ms,3,"0"),Z:f};return d.replace(Ue,function(_,L){return L||W[_]||f.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(r,h,n){var d,f=g.p(h),m=y(r),w=(m.utcOffset()-this.utcOffset())*i,v=this-m,M=g.m(this,m);return M=(d={},d[A]=M/12,d[q]=M,d[pe]=M/3,d[U]=(v-w)/6048e5,d[C]=(v-w)/864e5,d[D]=v/l,d[b]=v/i,d[o]=v/s,d)[f]||v,n?M:g.a(M)},a.daysInMonth=function(){return this.endOf(q).$D},a.$locale=function(){return x[this.$L]},a.locale=function(r,h){if(!r)return this.$L;var n=this.clone(),d=Z(r,h,!0);return d&&(n.$L=d),n},a.clone=function(){return g.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},u}(),we=G.prototype;return y.prototype=we,[["$ms",c],["$s",o],["$m",b],["$H",D],["$W",C],["$M",q],["$y",A],["$D",V]].forEach(function(u){we[u[1]]=function(a){return this.$g(a,u[0],u[1])}}),y.extend=function(u,a){return u.$i||(u(a,G,y),u.$i=!0),y},y.locale=Z,y.isDayjs=ie,y.unix=function(u){return y(1e3*u)},y.en=x[z],y.Ls=x,y.p={},y})})(ne);var _e=ne.exports;const X=$e(_e),Te=t=>X(t,void 0,!0).isValid(),ae=(t,e)=>X(t).isBefore(e),le=(t,e)=>X(t).isAfter(e),Ce=(t,e)=>{e||F("dateBetween");const[s,i]=k(e!=null?e:"");return le(t,s)&&ae(t,i)},qe=(t,...e)=>!!t,Se=t=>!0,Ie=(t,e)=>(e||F("in"),k(e).includes(t)),De=(t,e)=>R(t)?H(t,e):ee(t,e),Be=t=>typeof t=="boolean"||typeof t=="string"&&(t=t.toLowerCase(),t==="true"||t==="false"||t==="0"||t==="1"||t==="yes"||t==="no"),Ne=(t,e)=>{var[s,i]=k(e!=null?e:"");return R(t)?H(t,i)&&J(t,s):!T(t)&&!R(t)?Ce(t,e):(s=Number(s),i=Number(i),t!==void 0&&t!==Number&&t!==""&&T(s)&&T(i)?(t=Number(t),T(t)?fe(t,i)&&he(t,s):!1):!1)},Re=(t,...e)=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),oe=(t,e)=>t&&Q(t)?t.length>=Number(e):!1,ue=(t,e)=>t?Q(t)?t.length<=Number(e):!1:!0,Q=t=>typeof t=="string",Ae=t=>/^(ftp|http|https):\/\/[^ "]+$/.test(t),Oe=t=>typeof t!="string"||t.length===0?!1:/^[A-Z]/.test(t),Le=t=>typeof t!="string"||t.length===0?!1:/^[a-z]/.test(t),ke=(t,e)=>{e||F("startWith");const s=k(e!=null?e:"");return Q(t)?s.some(i=>t.startsWith(i)):!1},xe=(t,e)=>{e||F("endWith");const s=k(e!=null?e:"");return Q(t)?s.some(i=>t.endsWith(i)):!1},Qe=(t,e)=>{e||F("contains");const s=k(e!=null?e:"");return Q(t)?s.some(i=>t.includes(i)):!1},ee=(t,e)=>{if(!T(e))throw new Error("The length rule argument must be an integer");return e=parseInt(e),typeof t=="string"||typeof t=="number"?t=t.toString().split(""):typeof t=="object"&&t!==null&&t!==void 0&&(t=[]),Array.isArray(t)?t.length===e:!1},Ve=t=>{const s=/[A-Z]/.test(t),i=/[a-z]/.test(t),l=/\d/.test(t),c=/[!@#$%^&*(),.?":{}|<>]/.test(t);return!(t.length<8||!s||!i||!l||!c)},he=(t,e)=>{if(R(t))return J(t,e);if(t==null&&(t=0),!T(e))throw new Error("Min rule parameter must be an integer");return T(t)?Number(t)>=Number(e):oe(t,e)},fe=(t,e)=>{if(R(t))return H(t,e);if(!T(e))throw new Error("Min rule parameter must be an integer");return t==null&&(t=0),T(t)?Number(t)<=Number(e):ue(t,e)},de=t=>T(t)?Number.isInteger(Number(t)):!1,T=t=>t===""||t===null?!1:t==="0"||t===0||t==="1"||t===1?!0:!isNaN(Number(t))&&typeof t!="boolean"&&typeof t!="object",I=class{static rule(t,e,s){I.addRule(t,e),I.addMessage(t,s!=null?s:"This input is invalide")}static addRule(t,e){I.rules[t]=e}static addMessage(t,e){I.messages[t]=e}static hasRule(t){return t in I.rules}static getRule(t){return I.rules[t]}static getMessage(t){return I.messages[t]}static allRules(){return I.rules}static allMessages(){return I.messages}};let B=I;B.messages={required:"The :field field is required",email:"Please enter a valid email address",maxlength:"The maximum number of characters allowed has been exceeded",minlength:"The minimum number of characters allowed has not been reached",min:"The :field field must be greater than or equal to ':min'",max:"The :field field must be less than or equal to ':max'",string:"Please enter a string of characters",between:"This field value must be in ':min' and ':max'",startWith:"The :field field must be started with ':startWith'",endWith:"The :field field must be ended with ':endWith'",contains:"The :field field must contain the value ':contains'",in:"Please choose a correct value for the :field field",integer:"The :field field must an integer",int:"The :field field must an integer",number:"This field must be a number",numeric:"This field must be a number",file:"This field must be a file",url:"This field must be a valid url",length:"The size of this must be :size",len:"The size of this must be :size",maxFileSize:"The file size must be smaller than :maxFileSize.",minFileSize:"The file size must be larger than :minFileSize.",size:"This field's size should be less than or equal to :size ",boolean:"This field must be a boolean (yes or no) included",startWithUpper:"This field must be started with capitale letter",startWithLower:"This field must be started with capitale letter",nullable:"",password:"The password must be at least 8 characters long and include an uppercase letter, a lowercase letter, a digit, and a special character.",date:"This field must be a valid date",before:"The date must be before (:beforeDate)",after:"The date must be after (:afterDate)"},B.rules={required:qe,email:Re,maxlength:ue,minlength:oe,min:he,max:fe,string:Q,between:Ne,startWith:ke,endWith:xe,contains:Qe,in:Ie,integer:de,int:de,number:T,numeric:T,url:Ae,length:ee,len:ee,file:R,maxFileSize:H,minFileSize:J,size:De,boolean:Be,startWithUpper:Oe,nullable:Se,startWithLower:Le,password:Ve,date:Te,before:ae,after:le};class We{constructor(){this.messages=B.allMessages()}getRulesMessages(e){const s=[];for(const i of e)this.messages[i]?s.push(this.messages[i]):s.push("Invalid input");return s}parseMessage(e,s,i,l){let c=[e,...k(l!=null?l:"")],o=i;return o.includes(":field")||(c=c.slice(1)),o=this.replace(i,o,c),o}setMessages(e){return this.messages=S(S({},this.messages),e),this}replace(e,s,i){var c;const l=e.match(/:[a-zA-Z]+/g);if(l)for(let o=0;o<l.length;o++){const b=(c=i[o])!=null?c:"";s=s.replace(l[o],b)}return s}}class Fe{constructor(e,s){this.rules=e,this.messages=s,this.compensateMessages(),this.sanitizeMessage()}compensateMessages(){var s;const e=this.rules.length;if(this.messages.length!==e)for(let i=0;i<this.rules.length;i++){const l=this.convertAcoladeGroupToArray((s=this.messages[i])!=null?s:"");for(const c of l)this.messages[c]=this.messages[i]}}sanitizeMessage(){const e=/{(\d+(?:,\s*\d+)*)}/g;this.messages=this.messages.map(s=>s.replace(e,""))}convertAcoladeGroupToArray(e){var l;const s=/{(\d+(?:,\s*\d+)*)}/g;return(l=[...e.matchAll(s)].map(c=>c[1].split(",").map(o=>parseInt(o.trim())))[0])!=null?l:[]}getMessages(){return this.messages}}class ze{constructor(e,s,i){this.config=p,this.feedbackElement=null,this.rules=[],this.messages={},this._errors=[],this.name="",this.showMessage="first",this.showMessages=["first","full","last"],this.validClass="",this.invalidClass="is-invalid",this.param={emitEvent:!0,autoValidate:!0,failsOnfirst:!0,events:["blur","input","change"]},this.validator=new Pe(this.param),this.setConfig(s),this.setInputElement(e),this._setParams(i),this.setRules(i==null?void 0:i.rules),this.setInputName(),this.setFeedbackElement(),this.setShowMessage(),this.setInputValidationClass(),this._setErrors(),this._setEvent(i==null?void 0:i.events),this.validator.setParams(this.param)}setRules(e){var i;let s=(i=this.inputElement.dataset.qvRules)!=null?i:"";if(s)for(const l of s.split("|"))if(B.hasRule($(l).ruleName))this.rules.push(l);else throw new Error(`The validation rule ${l} is not supported by QuickV`);return this.rules=e!=null?e:this.rules,this.param.rules=this.rules,this}_setEvent(e){const s=this.inputElement.dataset.qvEvents;s&&(this.param.events=s.split("|").length?s.split("|"):this.param.events),this.param.events=e!=null?e:this.param.events}setInputElement(e){if(!(e instanceof Element)){const s=document.querySelector(e);s&&(e=s)}if(!(e instanceof Element))throw new Error("The 'inputElement' parameter must be valide 'ValidatableInput' type.");this.inputElement=e}setInputName(){let e=this.inputElement.name;if(e==null||typeof e=="string"&&e.length<0)throw new Error("The input name could not be empty or null");this.name=e;let s=this.name;this.inputElement.dataset.qvName&&(s=this.inputElement.dataset.qvName),this.param.attribute=s}set errors(e){e&&(this._errors=e!=null?e:[]),this.showErrorMessages()}setFeedbackElement(){var l;let s=this.inputElement.parentElement,i=null;for(;s&&!i;)i=s.querySelector(`[data-qv-feedback='${this.name}']`),s=s.parentElement;this.feedbackElement=i,this.param.feedbackElement=(l=this.param.feedbackElement)!=null?l:i}showErrorMessages(){if(this.feedbackElement instanceof HTMLElement,this.feedbackElement instanceof HTMLElement){let e="";Array.isArray(this._errors)&&(e=this._errors[0],this.showMessage=="full"?e=this._errors.join("<br>"):this.showMessage=="last"&&this._errors.length>0&&(e=this._errors[this._errors.length-1])),this.feedbackElement.innerHTML=e!=null?e:""}}setShowMessage(){var e;this.showMessage=(e=this.inputElement.dataset.qvShow)!=null?e:"first",this.showMessage=this.showMessages.includes(this.showMessage)?this.showMessage:"first"}setInputValidationClass(){var e,s,i,l;this.invalidClass=(e=this.config.invalidClass)!=null?e:"",this.validClass=(s=this.config.validClass)!=null?s:"",this.invalidClass=(i=this.inputElement.dataset.qvInvalidClass)!=null?i:this.invalidClass,this.validClass=(l=this.inputElement.dataset.qvValidClass)!=null?l:this.validClass}setValidationClass(e){const s=l=>{l.length>0&&this.inputElement.classList.remove(l)},i=l=>{l.length>0&&this.inputElement.classList.add(l)};e?(this.invalidClass.split(" ").forEach(s),this.validClass.split(" ").forEach(i),this.inputElement.setAttribute("data-qv-valid","1")):(this.validClass.split(" ").forEach(s),this.invalidClass.split(" ").forEach(i),this.inputElement.setAttribute("data-qv-valid","0"))}_setErrors(e){var l;const s=this.inputElement.dataset.qvMessages;let i={};for(let c=0;c<this.rules.length;c++){let o=(l=s==null?void 0:s.split("|").map(C=>C.trim()))!=null?l:[];o&&(o=new Fe(this.rules,o).getMessages());const b=o!==void 0?o[c]:"",D=$(this.rules[c]).ruleName;typeof b=="string"&&b.length>0?i[D]=b:i[D]=B.getMessage(D)}typeof e!="undefined"&&typeof e=="object"&&Object.values(e).length>0?this.param.errors=e:this.param.errors=i}getName(){return this.name}getValue(){return this.inputElement.type.toLowerCase()=="file"?this.inputElement.files?this.inputElement.files[0]:null:this.inputElement.value}setConfig(e){this.config=p,e&&typeof e=="object"&&(this.config=S(S({},this.config),e))}_setParams(e){typeof e=="object"&&typeof e!="undefined"&&(this.param=S(S({},this.param),e))}}class je extends ze{constructor(e,s,i){super(e,s,i)}validate(){const e=this.valid();return this.setValidationClass(e),this.errors=this.validator.getMessages(),this.emitChangeEvent(),e}getRules(){return this.rules}hasRules(){return this.rules.length>0}getMessages(){return this.validator.getMessages()}valid(){return this.validator.value=this.getValue(),this.validator.passes()}emitChangeEvent(){this.param.emitEvent&&this.inputElement.dispatchEvent(new CustomEvent("qv.input.validated",{detail:{rules:this.rules,input:{},element:this.inputElement},bubbles:!0}))}getErrors(){return this.validator.getErrors()}fails(){return!this.valid()}destroy(){var e;(e=this.param.events)==null||e.forEach(s=>{this.inputElement.removeEventListener(s,this.validate)})}}class Y extends je{constructor(e,s,i){super(e,s,i)}init(){var e;(e=this.param.events)==null||e.forEach(s=>{this.inputElement.addEventListener(s,()=>{this.validate()})})}rule(e,s,i){B.rule(e,s,i)}with(e){this._setParams(e),this.validator.setParams(this.param)}}class te{constructor(e,s){this._qvInputs=[],this.config={auto:!0},this.setContainer(e),this.setConfig(s),this._initQvInputs()}setContainer(e){if(!(e instanceof HTMLElement)){const i=document.querySelector(e);i&&(e=i)}if(!(e instanceof HTMLElement))throw new Error("The 'container' parameter must be of type HTMLElement.");this.container=e;const s=this.container.querySelector("[data-qv-submit]");s&&(this.submitButton=s)}init(){this._runQvInputs(),this.config.auto&&(this.disableButton(),this.onChange(),this.onInputValidated()),this.onSubmit(),this.onFails(e=>{this.disableButton()}),this.onPasses(e=>{this.enableButton()}),this.emit("qv.form.init")}disableButton(){this.submitButton&&this.submitButton.setAttribute("disabled","true")}enableButton(){this.submitButton&&this.submitButton.removeAttribute("disabled")}onChange(){this.on("change",this._handle.bind(this))}onInputValidated(){this.on("qv.input.validated",this._handle.bind(this))}_handle(e){e.stopPropagation(),this.isValid()?this.emit("qv.form.passes"):this.emit("qv.form.fails")}isValid(){return this._qvInputs.every(e=>e.valid())}onSubmit(){this.container.addEventListener("submit",e=>{this.container.querySelectorAll("[data-qv-rules]").forEach(s=>{new Y(s,{},{emitEvent:!1}).validate()}),this.isValid()?this.emit("qv.form.passes"):(this.emit("qv.form.fails"),e.preventDefault())})}rule(e,s,i){B.rule(e,s,i)}setConfig(e){e&&typeof e=="object"&&(this.config=S(S({},this.config),e))}on(e,s){this.container.addEventListener(e,s)}emit(e,s){const i=new CustomEvent(e,{detail:s});this.container.dispatchEvent(i)}onFails(e){this.on("qv.form.fails",e)}onPasses(e){this.on("qv.form.passes",e)}observeChanges(e){this.on("qv.form.updated",s=>{this.destroy(),this.setContainer(this.container),this._initQvInputs(),this._runQvInputs(),this.__call(e,this)})}validate(){this.emit("qv.input.validated")}onInit(e){typeof e=="function"&&this.__call(e,this)}_initQvInputs(){const e=Array.from(this.container.querySelectorAll("[data-qv-rules]")).map(s=>new Y(s));this._qvInputs.push(...e)}_runQvInputs(){for(const e of this._qvInputs)e.init()}__call(e,...s){typeof e=="function"&&e(...s)}destroy(){this.container.removeEventListener("submit",this.onSubmit),["change","qv.input.validated"].forEach(e=>{this.container.removeEventListener(e,this._handle)});for(const e of this._qvInputs)e.destroy();this._qvInputs=[]}}class ce{constructor(){this.config=p}init(e){this.setConfig(e),document.querySelectorAll("form").forEach(s=>{new te(s).init()})}rule(e,s,i){B.rule(e,s,i)}setConfig(e){this.config=p,e&&typeof e=="object"&&(this.config=S(S({},this.config),e))}}class Pe{constructor(e){this._rules=[],this._value=void 0,this._ruleExecuted=[],this._failOnfirst=!0,this._attr="",this._qvmessages={},e&&this.setParams(e)}validate(){const e=this._rules;if(!Array.isArray(e))throw new Error("The rule provided must be an array of Rule");for(const s of e){const{ruleName:i,params:l}=$(s),c=B.getRule(i),o=this._makeRuleExcutedInstance(i);if(o.params=l,!c)throw new Error(`The rule ${i} is not defined`);if(o.wasRunWith(this._value)?o.passed=o.passed:(o.passed=c(this._value,l),o.valueTested=this._value,o.run=!0),this._failOnfirst){if(!o.passed){this._parseRuleMessage(o),this._addRuleExecuted(o);break}}else o.passed?o.message="":this._parseRuleMessage(o),this._addRuleExecuted(o)}return!this.hasErrors()}getErrors(){var s;const e={};for(const i of this._ruleExecuted)i.passed||(e[i.ruleName]=(s=i.message)!=null?s:"");return e}hasErrors(){return this._ruleExecuted.some(e=>!e.passed)}passes(){return!this.hasErrors()}setRules(e){this._rules=e}getRules(){return this._rules}_makeRuleExcutedInstance(e){let s=this._ruleExecuted.find(i=>i.isNamed(e));return s!=null?s:new He(e)}_addRuleExecuted(e){this._ruleExecuted.includes(e)||this._ruleExecuted.push(e)}_parseRuleMessage(e){const s=new We().setMessages(this._qvmessages),i=s.parseMessage(this._attr,e.ruleName,s.getRulesMessages([e.ruleName])[0],e.params);return e.message=i,e}getMessages(){return this._ruleExecuted.filter(s=>!s.passed).map(s=>s.message)}set value(e){this._value=e,this.validate()}get value(){return this._value}setParams(e){var s,i,l;this._attr=(s=e.attribute)!=null?s:"",this._failOnfirst=e.failsOnfirst!==void 0&&e.failsOnfirst,this._rules=(i=e.rules)!=null?i:[],this._qvmessages=(l=e.errors)!=null?l:{}}}class He{constructor(e){this.passed=!1,this.message=null,this.run=!1,this.ruleName=e}wasRunWith(e){return this.valueTested===e&&this.run}isNamed(e){return this.ruleName===e}}typeof window!="undefined"&&(window.QvInput=(me=window.QvInput)!=null?me:Y,window.QvForm=(ge=window.QvForm)!=null?ge:te,window.Quickv=(ve=window.Quickv)!=null?ve:ce),E.Quickv=ce,E.QvConfig=p,E.QvForm=te,E.QvInput=Y,Object.defineProperty(E,Symbol.toStringTag,{value:"Module"})});
