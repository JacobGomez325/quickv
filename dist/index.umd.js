(function(y,v){typeof exports=="object"&&typeof module!="undefined"?v(exports):typeof define=="function"&&define.amd?define(["exports"],v):(y=typeof globalThis!="undefined"?globalThis:y||self,v(y.quickv={}))})(this,function(y){var me,ge,ve;"use strict";var Ke=Object.defineProperty;var Ee=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var ye=(y,v,$)=>v in y?Ke(y,v,{enumerable:!0,configurable:!0,writable:!0,value:$}):y[v]=$,q=(y,v)=>{for(var $ in v||(v={}))Je.call(v,$)&&ye(y,$,v[$]);if(Ee)for(var $ of Ee(v))Xe.call(v,$)&&ye(y,$,v[$]);return y};const v={invalidClass:"is-invalid",validClass:""},$=t=>{const e=/^(\w+):(.+)$/,s=t.match(e);if(s){const i=s[1];let l=s[2];return{ruleName:i,params:l}}else{const[i,l]=t.split(":");return{ruleName:i,params:l}}},x=(t,e=",")=>typeof t!="string"?[]:t.split(e).map(s=>s.trim()),Q=t=>{throw new Error(`Please provide <<${t}>> rule arguments`)},A=t=>t instanceof File||t instanceof Blob,Y=(t,e)=>{if(A(t)){const i=t.size;let l;const d=e==null?void 0:e.match(/^(\d+(\.\d+)?)\s*(B|KB|MB|GB)$/i);if(!d)throw new Error("Invalid maxSize format. Please use valid format like '1KB', '1MB', etc.");const o=parseFloat(d[1]),b=d[3].toUpperCase();return b==="KB"?l=o*1024:b==="MB"?l=o*1024*1024:b==="GB"?l=o*1024*1024*1024:l=o,i<=l}else return!1},J=(t,e)=>{if(A(t)){const i=t.size;let l;const d=e==null?void 0:e.match(/^(\d+(\.\d+)?)\s*(B|KB|MB|GB)$/i);if(!d)throw new Error("Invalid minSize format. Please use valid format like '1KB', '1MB', etc.");const o=parseFloat(d[1]),b=d[3].toUpperCase();return b==="KB"?l=o*1024:b==="MB"?l=o*1024*1024:b==="GB"?l=o*1024*1024*1024:l=o,i>=l}else return!1};var Me=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function $e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ne={exports:{}};(function(t,e){(function(s,i){t.exports=i()})(Me,function(){var s=1e3,i=6e4,l=36e5,d="millisecond",o="second",b="minute",B="hour",S="day",U="week",C="month",pe="quarter",I="year",F="date",be="Invalid Date",Ye=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Ze={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var a=["th","st","nd","rd"],r=u%100;return"["+u+(a[(r-20)%10]||a[r]||a[0])+"]"}},se=function(u,a,r){var h=String(u);return!h||h.length>=a?u:""+Array(a+1-h.length).join(r)+u},Ge={s:se,z:function(u){var a=-u.utcOffset(),r=Math.abs(a),h=Math.floor(r/60),n=r%60;return(a<=0?"+":"-")+se(h,2,"0")+":"+se(n,2,"0")},m:function u(a,r){if(a.date()<r.date())return-u(r,a);var h=12*(r.year()-a.year())+(r.month()-a.month()),n=a.clone().add(h,C),c=r-n<0,f=a.clone().add(h+(c?-1:1),C);return+(-(h+(r-n)/(c?n-f:f-n))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:C,y:I,w:U,d:S,D:F,h:B,m:b,s:o,ms:d,Q:pe}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},j="en",L={};L[j]=Ze;var ie=function(u){return u instanceof G},Z=function u(a,r,h){var n;if(!a)return j;if(typeof a=="string"){var c=a.toLowerCase();L[c]&&(n=c),r&&(L[c]=r,n=c);var f=a.split("-");if(!n&&f.length>1)return u(f[0])}else{var m=a.name;L[m]=a,n=m}return!h&&n&&(j=n),n||!h&&j},E=function(u,a){if(ie(u))return u.clone();var r=typeof a=="object"?a:{};return r.date=u,r.args=arguments,new G(r)},g=Ge;g.l=Z,g.i=ie,g.w=function(u,a){return E(u,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var G=function(){function u(r){this.$L=Z(r.locale,null,!0),this.parse(r)}var a=u.prototype;return a.parse=function(r){this.$d=function(h){var n=h.date,c=h.utc;if(n===null)return new Date(NaN);if(g.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var f=n.match(Ye);if(f){var m=f[2]-1||0,w=(f[7]||"0").substring(0,3);return c?new Date(Date.UTC(f[1],m,f[3]||1,f[4]||0,f[5]||0,f[6]||0,w)):new Date(f[1],m,f[3]||1,f[4]||0,f[5]||0,f[6]||0,w)}}return new Date(n)}(r),this.$x=r.x||{},this.init()},a.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},a.$utils=function(){return g},a.isValid=function(){return this.$d.toString()!==be},a.isSame=function(r,h){var n=E(r);return this.startOf(h)<=n&&n<=this.endOf(h)},a.isAfter=function(r,h){return E(r)<this.startOf(h)},a.isBefore=function(r,h){return this.endOf(h)<E(r)},a.$g=function(r,h,n){return g.u(r)?this[h]:this.set(n,r)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(r,h){var n=this,c=!!g.u(h)||h,f=g.p(r),m=function(z,_){var k=g.w(n.$u?Date.UTC(n.$y,_,z):new Date(n.$y,_,z),n);return c?k:k.endOf(S)},w=function(z,_){return g.w(n.toDate()[z].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(_)),n)},p=this.$W,M=this.$M,O=this.$D,R="set"+(this.$u?"UTC":"");switch(f){case I:return c?m(1,0):m(31,11);case C:return c?m(1,M):m(0,M+1);case U:var P=this.$locale().weekStart||0,H=(p<P?p+7:p)-P;return m(c?O-H:O+(6-H),M);case S:case F:return w(R+"Hours",0);case B:return w(R+"Minutes",1);case b:return w(R+"Seconds",2);case o:return w(R+"Milliseconds",3);default:return this.clone()}},a.endOf=function(r){return this.startOf(r,!1)},a.$set=function(r,h){var n,c=g.p(r),f="set"+(this.$u?"UTC":""),m=(n={},n[S]=f+"Date",n[F]=f+"Date",n[C]=f+"Month",n[I]=f+"FullYear",n[B]=f+"Hours",n[b]=f+"Minutes",n[o]=f+"Seconds",n[d]=f+"Milliseconds",n)[c],w=c===S?this.$D+(h-this.$W):h;if(c===C||c===I){var p=this.clone().set(F,1);p.$d[m](w),p.init(),this.$d=p.set(F,Math.min(this.$D,p.daysInMonth())).$d}else m&&this.$d[m](w);return this.init(),this},a.set=function(r,h){return this.clone().$set(r,h)},a.get=function(r){return this[g.p(r)]()},a.add=function(r,h){var n,c=this;r=Number(r);var f=g.p(h),m=function(M){var O=E(c);return g.w(O.date(O.date()+Math.round(M*r)),c)};if(f===C)return this.set(C,this.$M+r);if(f===I)return this.set(I,this.$y+r);if(f===S)return m(1);if(f===U)return m(7);var w=(n={},n[b]=i,n[B]=l,n[o]=s,n)[f]||1,p=this.$d.getTime()+r*w;return g.w(p,this)},a.subtract=function(r,h){return this.add(-1*r,h)},a.format=function(r){var h=this,n=this.$locale();if(!this.isValid())return n.invalidDate||be;var c=r||"YYYY-MM-DDTHH:mm:ssZ",f=g.z(this),m=this.$H,w=this.$m,p=this.$M,M=n.weekdays,O=n.months,R=function(_,k,re,K){return _&&(_[k]||_(h,c))||re[k].slice(0,K)},P=function(_){return g.s(m%12||12,_,"0")},H=n.meridiem||function(_,k,re){var K=_<12?"AM":"PM";return re?K.toLowerCase():K},z={YY:String(this.$y).slice(-2),YYYY:this.$y,M:p+1,MM:g.s(p+1,2,"0"),MMM:R(n.monthsShort,p,O,3),MMMM:R(O,p),D:this.$D,DD:g.s(this.$D,2,"0"),d:String(this.$W),dd:R(n.weekdaysMin,this.$W,M,2),ddd:R(n.weekdaysShort,this.$W,M,3),dddd:M[this.$W],H:String(m),HH:g.s(m,2,"0"),h:P(1),hh:P(2),a:H(m,w,!0),A:H(m,w,!1),m:String(w),mm:g.s(w,2,"0"),s:String(this.$s),ss:g.s(this.$s,2,"0"),SSS:g.s(this.$ms,3,"0"),Z:f};return c.replace(Ue,function(_,k){return k||z[_]||f.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(r,h,n){var c,f=g.p(h),m=E(r),w=(m.utcOffset()-this.utcOffset())*i,p=this-m,M=g.m(this,m);return M=(c={},c[I]=M/12,c[C]=M,c[pe]=M/3,c[U]=(p-w)/6048e5,c[S]=(p-w)/864e5,c[B]=p/l,c[b]=p/i,c[o]=p/s,c)[f]||p,n?M:g.a(M)},a.daysInMonth=function(){return this.endOf(C).$D},a.$locale=function(){return L[this.$L]},a.locale=function(r,h){if(!r)return this.$L;var n=this.clone(),c=Z(r,h,!0);return c&&(n.$L=c),n},a.clone=function(){return g.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},u}(),we=G.prototype;return E.prototype=we,[["$ms",d],["$s",o],["$m",b],["$H",B],["$W",S],["$M",C],["$y",I],["$D",F]].forEach(function(u){we[u[1]]=function(a){return this.$g(a,u[0],u[1])}}),E.extend=function(u,a){return u.$i||(u(a,G,E),u.$i=!0),E},E.locale=Z,E.isDayjs=ie,E.unix=function(u){return E(1e3*u)},E.en=L[j],E.Ls=L,E.p={},E})})(ne);var _e=ne.exports;const X=$e(_e),Te=t=>X(t,void 0,!0).isValid(),ae=(t,e)=>X(t).isBefore(e),le=(t,e)=>X(t).isAfter(e),Se=(t,e)=>{e||Q("dateBetween");const[s,i]=x(e!=null?e:"");return le(t,s)&&ae(t,i)},Ce=(t,...e)=>!!t,qe=t=>!0,De=(t,e)=>(e||Q("in"),x(e).includes(t)),Be=(t,e)=>A(t)?Y(t,e):ee(t,e),Ne=t=>typeof t=="boolean"||typeof t=="string"&&(t=t.toLowerCase(),t==="true"||t==="false"||t==="0"||t==="1"||t==="yes"||t==="no"),Re=(t,e)=>{var[s,i]=x(e!=null?e:"");return A(t)?Y(t,i)&&J(t,s):!T(t)&&!A(t)?Se(t,e):(s=Number(s),i=Number(i),t!==void 0&&t!==Number&&t!==""&&T(s)&&T(i)?(t=Number(t),T(t)?fe(t,i)&&he(t,s):!1):!1)},Ae=(t,...e)=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),oe=(t,e)=>t&&W(t)?t.length>=Number(e):!1,ue=(t,e)=>t?W(t)?t.length<=Number(e):!1:!0,W=t=>typeof t=="string",Ie=t=>/^(ftp|http|https):\/\/[^ "]+$/.test(t),Oe=t=>typeof t!="string"||t.length===0?!1:/^[A-Z]/.test(t),ke=t=>typeof t!="string"||t.length===0?!1:/^[a-z]/.test(t),xe=(t,e)=>{e||Q("startWith");const s=x(e!=null?e:"");return W(t)?s.some(i=>t.startsWith(i)):!1},Le=(t,e)=>{e||Q("endWith");const s=x(e!=null?e:"");return W(t)?s.some(i=>t.endsWith(i)):!1},We=(t,e)=>{e||Q("contains");const s=x(e!=null?e:"");return W(t)?s.some(i=>t.includes(i)):!1},ee=(t,e)=>{if(!T(e))throw new Error("The length rule argument must be an integer");return e=parseInt(e),typeof t=="string"||typeof t=="number"?t=t.toString().split(""):typeof t=="object"&&t!==null&&t!==void 0&&(t=[]),Array.isArray(t)?t.length===e:!1},Ve=t=>{const s=/[A-Z]/.test(t),i=/[a-z]/.test(t),l=/\d/.test(t),d=/[!@#$%^&*(),.?":{}|<>]/.test(t);return!(t.length<8||!s||!i||!l||!d)},he=(t,e)=>{if(A(t))return J(t,e);if(t==null&&(t=0),!T(e))throw new Error("Min rule parameter must be an integer");return T(t)?Number(t)>=Number(e):oe(t,e)},fe=(t,e)=>{if(A(t))return Y(t,e);if(!T(e))throw new Error("Min rule parameter must be an integer");return t==null&&(t=0),T(t)?Number(t)<=Number(e):ue(t,e)},ce=t=>T(t)?Number.isInteger(Number(t)):!1,T=t=>t===""||t===null?!1:t==="0"||t===0||t==="1"||t===1?!0:!isNaN(Number(t))&&typeof t!="boolean"&&typeof t!="object",D=class{static rule(t,e,s){D.addRule(t,e),D.addMessage(t,s!=null?s:"This input is invalide")}static addRule(t,e){D.rules[t]=e}static addMessage(t,e){D.messages[t]=e}static hasRule(t){return t in D.rules}static getRule(t){return D.rules[t]}static getMessage(t){return D.messages[t]}static allRules(){return D.rules}static allMessages(){return D.messages}};let N=D;N.messages={required:"The :field field is required",email:"Please enter a valid email address",maxlength:"The maximum number of characters allowed has been exceeded",minlength:"The minimum number of characters allowed has not been reached",min:"The :field field must be greater than or equal to ':min'",max:"The :field field must be less than or equal to ':max'",string:"Please enter a string of characters",between:"This field value must be in ':min' and ':max'",startWith:"The :field field must be started with ':startWith'",endWith:"The :field field must be ended with ':endWith'",contains:"The :field field must contain the value ':contains'",in:"Please choose a correct value for the :field field",integer:"The :field field must an integer",int:"The :field field must an integer",number:"This field must be a number",numeric:"This field must be a number",file:"This field must be a file",url:"This field must be a valid url",length:"The size of this must be :size",len:"The size of this must be :size",maxFileSize:"The file size must be smaller than :maxFileSize.",minFileSize:"The file size must be larger than :minFileSize.",size:"This field's size should be less than or equal to :size ",boolean:"This field must be a boolean (yes or no) included",startWithUpper:"This field must be started with capitale letter",startWithLower:"This field must be started with capitale letter",nullable:"",password:"The password must be at least 8 characters long and include an uppercase letter, a lowercase letter, a digit, and a special character.",date:"This field must be a valid date",before:"The date must be before (:beforeDate)",after:"The date must be after (:afterDate)"},N.rules={required:Ce,email:Ae,maxlength:ue,minlength:oe,min:he,max:fe,string:W,between:Re,startWith:xe,endWith:Le,contains:We,in:De,integer:ce,int:ce,number:T,numeric:T,url:Ie,length:ee,len:ee,file:A,maxFileSize:Y,minFileSize:J,size:Be,boolean:Ne,startWithUpper:Oe,nullable:qe,startWithLower:ke,password:Ve,date:Te,before:ae,after:le};class Fe{constructor(){this.messages=N.allMessages()}getRulesMessages(e){const s=[];for(const i of e)this.messages[i]?s.push(this.messages[i]):s.push("Invalid input");return s}parseMessage(e,s,i,l){let d=[e,...x(l!=null?l:"")],o=i;return o.includes(":field")||(d=d.slice(1)),o=this.replace(i,o,d),o}setMessages(e){return this.messages=q(q({},this.messages),e),this}replace(e,s,i){var d;const l=e.match(/:[a-zA-Z]+/g);if(l)for(let o=0;o<l.length;o++){const b=(d=i[o])!=null?d:"";s=s.replace(l[o],b)}return s}}class ze{constructor(e,s){this.rules=e,this.messages=s,this.compensateMessages(),this.sanitizeMessage()}compensateMessages(){var s;const e=this.rules.length;if(this.messages.length!==e)for(let i=0;i<this.rules.length;i++){const l=this.convertAcoladeGroupToArray((s=this.messages[i])!=null?s:"");for(const d of l)this.messages[d]=this.messages[i]}}sanitizeMessage(){const e=/{(\d+(?:,\s*\d+)*)}/g;this.messages=this.messages.map(s=>s.replace(e,""))}convertAcoladeGroupToArray(e){var l;const s=/{(\d+(?:,\s*\d+)*)}/g;return(l=[...e.matchAll(s)].map(d=>d[1].split(",").map(o=>parseInt(o.trim())))[0])!=null?l:[]}getMessages(){return this.messages}}class Qe{constructor(e,s,i){this.config=v,this.feedbackElement=null,this.rules=[],this.messages={},this._errors=[],this.name="",this.showMessage="first",this.showMessages=["first","full","last"],this.validClass="",this.invalidClass="is-invalid",this.param={emitEvent:!0,autoValidate:!0,failsOnfirst:!0,events:["blur","input","change"]},this.validator=new Pe(this.param),this.setConfig(s),this.setInputElement(e),this._setParams(i),this.setRules(i==null?void 0:i.rules),this.setInputName(),this.setFeedbackElement(),this.setShowMessage(),this.setInputValidationClass(),this._setErrors(),this._setEvent(i==null?void 0:i.events),this.validator.setParams(this.param)}setRules(e){var i;let s=(i=this.inputElement.dataset.qvRules)!=null?i:"";if(s)for(const l of s.split("|"))if(N.hasRule($(l).ruleName))this.rules.push(l);else throw new Error(`The validation rule ${l} is not supported by QuickV`);return this.rules=e!=null?e:this.rules,this.param.rules=this.rules,this}_setEvent(e){const s=this.inputElement.dataset.qvEvents;s&&(this.param.events=s.split("|").length?s.split("|"):this.param.events),this.param.events=e!=null?e:this.param.events}setInputElement(e){if(!(e instanceof Element)){const s=document.querySelector(e);s&&(e=s)}if(!(e instanceof Element))throw new Error("The 'inputElement' parameter must be valide 'ValidatableInput' type.");this.inputElement=e}setInputName(){let e=this.inputElement.name;if(e==null||typeof e=="string"&&e.length<0)throw new Error("The input name could not be empty or null");this.name=e;let s=this.name;this.inputElement.dataset.qvName&&(s=this.inputElement.dataset.qvName),this.param.attribute=s}set errors(e){e&&(this._errors=e!=null?e:[]),this.showErrorMessages()}setFeedbackElement(){var l;let s=this.inputElement.parentElement,i=null;for(;s&&!i;)i=s.querySelector(`[data-qv-feedback='${this.name}']`),s=s.parentElement;this.feedbackElement=i,this.param.feedbackElement=(l=this.param.feedbackElement)!=null?l:i}showErrorMessages(){if(this.feedbackElement instanceof HTMLElement,this.feedbackElement instanceof HTMLElement){let e="";Array.isArray(this._errors)&&(e=this._errors[0],this.showMessage=="full"?e=this._errors.join("<br>"):this.showMessage=="last"&&this._errors.length>0&&(e=this._errors[this._errors.length-1])),this.feedbackElement.innerHTML=e!=null?e:""}}setShowMessage(){var e;this.showMessage=(e=this.inputElement.dataset.qvShow)!=null?e:"first",this.showMessage=this.showMessages.includes(this.showMessage)?this.showMessage:"first"}setInputValidationClass(){var e,s,i,l;this.invalidClass=(e=this.config.invalidClass)!=null?e:"",this.validClass=(s=this.config.validClass)!=null?s:"",this.invalidClass=(i=this.inputElement.dataset.qvInvalidClass)!=null?i:this.invalidClass,this.validClass=(l=this.inputElement.dataset.qvValidClass)!=null?l:this.validClass}setValidationClass(e){const s=l=>{l.length>0&&this.inputElement.classList.remove(l)},i=l=>{l.length>0&&this.inputElement.classList.add(l)};e?(this.invalidClass.split(" ").forEach(s),this.validClass.split(" ").forEach(i),this.inputElement.setAttribute("data-qv-valid","1")):(this.validClass.split(" ").forEach(s),this.invalidClass.split(" ").forEach(i),this.inputElement.setAttribute("data-qv-valid","0"))}_setErrors(e){var l;const s=this.inputElement.dataset.qvMessages;let i={};for(let d=0;d<this.rules.length;d++){let o=(l=s==null?void 0:s.split("|").map(S=>S.trim()))!=null?l:[];o&&(o=new ze(this.rules,o).getMessages());const b=o!==void 0?o[d]:"",B=$(this.rules[d]).ruleName;typeof b=="string"&&b.length>0?i[B]=b:i[B]=N.getMessage(B)}typeof e!="undefined"&&typeof e=="object"&&Object.values(e).length>0?this.param.errors=e:this.param.errors=i}getName(){return this.name}getValue(){return this.inputElement.type.toLowerCase()=="file"?this.inputElement.files?this.inputElement.files[0]:null:this.inputElement.value}setConfig(e){this.config=v,e&&typeof e=="object"&&(this.config=q(q({},this.config),e))}_setParams(e){typeof e=="object"&&typeof e!="undefined"&&(this.param=q(q({},this.param),e))}}class je extends Qe{constructor(e,s,i){super(e,s,i)}validate(){const e=this.valid();return this.setValidationClass(e),this.errors=this.validator.getMessages(),this.emitChangeEvent(),e}getRules(){return this.rules}hasRules(){return this.rules.length>0}getMessages(){return this.validator.getMessages()}valid(){return this.validator.value=this.getValue(),this.validator.passes()}emitChangeEvent(){this.param.emitEvent&&this.inputElement.dispatchEvent(new CustomEvent("qv.input.validated",{detail:{rules:this.rules,input:{},element:this.inputElement},bubbles:!0}))}getErrors(){return this.validator.getErrors()}fails(){return!this.valid()}destroy(){var e;(e=this.param.events)==null||e.forEach(s=>{this.inputElement.removeEventListener(s,this.validate)})}}class V extends je{constructor(e,s,i){super(e,s,i)}init(){var e;(e=this.param.events)==null||e.forEach(s=>{this.inputElement.addEventListener(s,()=>{this.validate()})})}rule(e,s,i){N.rule(e,s,i)}with(e){this._setParams(e),this.validator.setParams(this.param)}}class te{constructor(e){this.inputs={},this.config=v,this.setContainer(e)}setContainer(e){if(!(e instanceof HTMLElement)){const i=document.querySelector(e);i&&(e=i)}if(!(e instanceof HTMLElement))throw new Error("The 'container' parameter must be of type HTMLElement.");this.container=e;const s=this.container.querySelector("[data-qv-submit]");s&&(this.submitButton=s)}init(e){this.setConfig(e),this.disableButton(),this.container.querySelectorAll("[data-qv-rules]").forEach(s=>{new V(s,this.config).init()}),this.handle(),this.onSubmit(),this.setInputs(),this.onFails(s=>{this.disableButton()}),this.onPasses(s=>{this.enableButton()})}disableButton(){this.submitButton&&this.submitButton.setAttribute("disabled","true")}enableButton(){this.submitButton&&this.submitButton.removeAttribute("disabled")}handle(){["change","qv.input.validated"].forEach(e=>{this.on(e,s=>{s.stopPropagation(),this.isValid()?this.emit("qv.form.passes"):this.emit("qv.form.fails")})})}isValid(){return[...this.container.querySelectorAll("[data-qv-rules]")].every(s=>new V(s).valid())}onSubmit(){this.container.addEventListener("submit",e=>{this.container.querySelectorAll("[data-qv-rules]").forEach(s=>{new V(s,this.config,{emitEvent:!1}).validate()}),this.isValid()?this.emit("qv.form.passes"):(this.emit("qv.form.fails"),e.preventDefault())})}setInputs(){this.container.querySelectorAll("[data-qv-rules]").forEach(e=>{const s=new V(e);this.inputs[s.getName()]=s.getValue()})}rule(e,s,i){N.rule(e,s,i)}setConfig(e){this.config=v,e&&typeof e=="object"&&(this.config=q(q({},this.config),e))}on(e,s){this.container.addEventListener(e,s)}emit(e,s){const i=new CustomEvent(e,{detail:s});this.container.dispatchEvent(i)}onFails(e){this.on("qv.form.fails",e)}onPasses(e){this.on("qv.form.passes",e)}}class de{constructor(){this.config=v}init(e){this.setConfig(e),document.querySelectorAll("form").forEach(s=>{new te(s).init(this.config)})}rule(e,s,i){N.rule(e,s,i)}setConfig(e){this.config=v,e&&typeof e=="object"&&(this.config=q(q({},this.config),e))}}class Pe{constructor(e){this._rules=[],this._value=void 0,this._ruleExecuted=[],this._failOnfirst=!0,this._attr="",this._qvmessages={},e&&this.setParams(e)}validate(){const e=this._rules;if(!Array.isArray(e))throw new Error("The rule provided must be an array of Rule");for(const s of e){const{ruleName:i,params:l}=$(s),d=N.getRule(i),o=this._makeRuleExcutedInstance(i);if(o.params=l,!d)throw new Error(`The rule ${i} is not defined`);if(o.wasRunWith(this._value)?o.passed=o.passed:(o.passed=d(this._value,l),o.valueTested=this._value,o.run=!0),this._failOnfirst){if(!o.passed){this._parseRuleMessage(o),this._addRuleExecuted(o);break}}else o.passed?o.message="":this._parseRuleMessage(o),this._addRuleExecuted(o)}return!this.hasErrors()}getErrors(){var s;const e={};for(const i of this._ruleExecuted)i.passed||(e[i.ruleName]=(s=i.message)!=null?s:"");return e}hasErrors(){return this._ruleExecuted.some(e=>!e.passed)}passes(){return!this.hasErrors()}setRules(e){this._rules=e}getRules(){return this._rules}_makeRuleExcutedInstance(e){let s=this._ruleExecuted.find(i=>i.isNamed(e));return s!=null?s:new He(e)}_addRuleExecuted(e){this._ruleExecuted.includes(e)||this._ruleExecuted.push(e)}_parseRuleMessage(e){const s=new Fe().setMessages(this._qvmessages),i=s.parseMessage(this._attr,e.ruleName,s.getRulesMessages([e.ruleName])[0],e.params);return e.message=i,e}getMessages(){return this._ruleExecuted.filter(s=>!s.passed).map(s=>s.message)}set value(e){this._value=e,this.validate()}get value(){return this._value}setParams(e){var s,i,l;this._attr=(s=e.attribute)!=null?s:"",this._failOnfirst=e.failsOnfirst!==void 0&&e.failsOnfirst,this._rules=(i=e.rules)!=null?i:[],this._qvmessages=(l=e.errors)!=null?l:{}}}class He{constructor(e){this.passed=!1,this.message=null,this.run=!1,this.ruleName=e}wasRunWith(e){return this.valueTested===e&&this.run}isNamed(e){return this.ruleName===e}}typeof window!="undefined"&&(window.QvInput=(me=window.QvInput)!=null?me:V,window.QvForm=(ge=window.QvForm)!=null?ge:te,window.Quickv=(ve=window.Quickv)!=null?ve:de),y.Quickv=de,y.QvConfig=v,y.QvForm=te,y.QvInput=V,Object.defineProperty(y,Symbol.toStringTag,{value:"Module"})});
