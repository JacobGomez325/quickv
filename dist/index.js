(function(M,p){typeof exports=="object"&&typeof module!="undefined"?p(exports):typeof define=="function"&&define.amd?define(["exports"],p):(M=typeof globalThis!="undefined"?globalThis:M||self,p(M.quickv={}))})(this,function(M){var ye,Me,Ee;"use strict";var Je=Object.defineProperty;var Te=Object.getOwnPropertySymbols;var Xe=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var Se=(M,p,S)=>p in M?Je(M,p,{enumerable:!0,configurable:!0,writable:!0,value:S}):M[p]=S,R=(M,p)=>{for(var S in p||(p={}))Xe.call(p,S)&&Se(M,S,p[S]);if(Te)for(var S of Te(p))et.call(p,S)&&Se(M,S,p[S]);return M};const p={invalidClass:"is-invalid",validClass:""},S=t=>{const e=/^(\w+):(.+)$/,s=t.match(e);if(s){const r=s[1];let o=s[2];return{ruleName:r,params:o}}else{const[r,o]=t.split(":");return{ruleName:r,params:o}}},k=(t,e=",")=>typeof t!="string"?[]:t.split(e).map(s=>s.trim()),x=t=>{throw new Error(`Please provide <<${t}>> rule arguments`)},V=t=>t instanceof File||t instanceof Blob,Z=(t,e)=>{if(V(t)){const r=t.size;let o;const d=e==null?void 0:e.match(/^(\d+(\.\d+)?)\s*(B|KB|MB|GB)$/i);if(!d)throw new Error("Invalid maxSize format. Please use valid format like '1KB', '1MB', etc.");const f=parseFloat(d[1]),v=d[3].toUpperCase();return v==="KB"?o=f*1024:v==="MB"?o=f*1024*1024:v==="GB"?o=f*1024*1024*1024:o=f,r<=o}else return!1},ee=(t,e)=>{if(V(t)){const r=t.size;let o;const d=e==null?void 0:e.match(/^(\d+(\.\d+)?)\s*(B|KB|MB|GB)$/i);if(!d)throw new Error("Invalid minSize format. Please use valid format like '1KB', '1MB', etc.");const f=parseFloat(d[1]),v=d[3].toUpperCase();return v==="KB"?o=f*1024:v==="MB"?o=f*1024*1024:v==="GB"?o=f*1024*1024*1024:o=f,r>=o}else return!1};var Ce=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Be(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var le={exports:{}};(function(t,e){(function(s,r){t.exports=r()})(Ce,function(){var s=1e3,r=6e4,o=36e5,d="millisecond",f="second",v="minute",q="hour",D="day",W="week",$="month",H="quarter",A="year",_="date",G="Invalid Date",Ue=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ze=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Ge={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(l){var a=["th","st","nd","rd"],i=l%100;return"["+l+(a[(i-20)%10]||a[i]||a[0])+"]"}},ne=function(l,a,i){var u=String(l);return!u||u.length>=a?l:""+Array(a+1-u.length).join(i)+l},Ke={s:ne,z:function(l){var a=-l.utcOffset(),i=Math.abs(a),u=Math.floor(i/60),n=i%60;return(a<=0?"+":"-")+ne(u,2,"0")+":"+ne(n,2,"0")},m:function l(a,i){if(a.date()<i.date())return-l(i,a);var u=12*(i.year()-a.year())+(i.month()-a.month()),n=a.clone().add(u,$),c=i-n<0,h=a.clone().add(u+(c?-1:1),$);return+(-(u+(i-n)/(c?n-h:h-n))||0)},a:function(l){return l<0?Math.ceil(l)||0:Math.floor(l)},p:function(l){return{M:$,y:A,w:W,d:D,D:_,h:q,m:v,s:f,ms:d,Q:H}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(l){return l===void 0}},P="en",Q={};Q[P]=Ge;var ae=function(l){return l instanceof J},K=function l(a,i,u){var n;if(!a)return P;if(typeof a=="string"){var c=a.toLowerCase();Q[c]&&(n=c),i&&(Q[c]=i,n=c);var h=a.split("-");if(!n&&h.length>1)return l(h[0])}else{var m=a.name;Q[m]=a,n=m}return!u&&n&&(P=n),n||!u&&P},y=function(l,a){if(ae(l))return l.clone();var i=typeof a=="object"?a:{};return i.date=l,i.args=arguments,new J(i)},g=Ke;g.l=K,g.i=ae,g.w=function(l,a){return y(l,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var J=function(){function l(i){this.$L=K(i.locale,null,!0),this.parse(i)}var a=l.prototype;return a.parse=function(i){this.$d=function(u){var n=u.date,c=u.utc;if(n===null)return new Date(NaN);if(g.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var h=n.match(Ue);if(h){var m=h[2]-1||0,w=(h[7]||"0").substring(0,3);return c?new Date(Date.UTC(h[1],m,h[3]||1,h[4]||0,h[5]||0,h[6]||0,w)):new Date(h[1],m,h[3]||1,h[4]||0,h[5]||0,h[6]||0,w)}}return new Date(n)}(i),this.$x=i.x||{},this.init()},a.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},a.$utils=function(){return g},a.isValid=function(){return this.$d.toString()!==G},a.isSame=function(i,u){var n=y(i);return this.startOf(u)<=n&&n<=this.endOf(u)},a.isAfter=function(i,u){return y(i)<this.startOf(u)},a.isBefore=function(i,u){return this.endOf(u)<y(i)},a.$g=function(i,u,n){return g.u(i)?this[u]:this.set(n,i)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(i,u){var n=this,c=!!g.u(u)||u,h=g.p(i),m=function(j,T){var O=g.w(n.$u?Date.UTC(n.$y,T,j):new Date(n.$y,T,j),n);return c?O:O.endOf(D)},w=function(j,T){return g.w(n.toDate()[j].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(T)),n)},b=this.$W,E=this.$M,L=this.$D,N="set"+(this.$u?"UTC":"");switch(h){case A:return c?m(1,0):m(31,11);case $:return c?m(1,E):m(0,E+1);case W:var Y=this.$locale().weekStart||0,U=(b<Y?b+7:b)-Y;return m(c?L-U:L+(6-U),E);case D:case _:return w(N+"Hours",0);case q:return w(N+"Minutes",1);case v:return w(N+"Seconds",2);case f:return w(N+"Milliseconds",3);default:return this.clone()}},a.endOf=function(i){return this.startOf(i,!1)},a.$set=function(i,u){var n,c=g.p(i),h="set"+(this.$u?"UTC":""),m=(n={},n[D]=h+"Date",n[_]=h+"Date",n[$]=h+"Month",n[A]=h+"FullYear",n[q]=h+"Hours",n[v]=h+"Minutes",n[f]=h+"Seconds",n[d]=h+"Milliseconds",n)[c],w=c===D?this.$D+(u-this.$W):u;if(c===$||c===A){var b=this.clone().set(_,1);b.$d[m](w),b.init(),this.$d=b.set(_,Math.min(this.$D,b.daysInMonth())).$d}else m&&this.$d[m](w);return this.init(),this},a.set=function(i,u){return this.clone().$set(i,u)},a.get=function(i){return this[g.p(i)]()},a.add=function(i,u){var n,c=this;i=Number(i);var h=g.p(u),m=function(E){var L=y(c);return g.w(L.date(L.date()+Math.round(E*i)),c)};if(h===$)return this.set($,this.$M+i);if(h===A)return this.set(A,this.$y+i);if(h===D)return m(1);if(h===W)return m(7);var w=(n={},n[v]=r,n[q]=o,n[f]=s,n)[h]||1,b=this.$d.getTime()+i*w;return g.w(b,this)},a.subtract=function(i,u){return this.add(-1*i,u)},a.format=function(i){var u=this,n=this.$locale();if(!this.isValid())return n.invalidDate||G;var c=i||"YYYY-MM-DDTHH:mm:ssZ",h=g.z(this),m=this.$H,w=this.$m,b=this.$M,E=n.weekdays,L=n.months,N=function(T,O,oe,X){return T&&(T[O]||T(u,c))||oe[O].slice(0,X)},Y=function(T){return g.s(m%12||12,T,"0")},U=n.meridiem||function(T,O,oe){var X=T<12?"AM":"PM";return oe?X.toLowerCase():X},j={YY:String(this.$y).slice(-2),YYYY:this.$y,M:b+1,MM:g.s(b+1,2,"0"),MMM:N(n.monthsShort,b,L,3),MMMM:N(L,b),D:this.$D,DD:g.s(this.$D,2,"0"),d:String(this.$W),dd:N(n.weekdaysMin,this.$W,E,2),ddd:N(n.weekdaysShort,this.$W,E,3),dddd:E[this.$W],H:String(m),HH:g.s(m,2,"0"),h:Y(1),hh:Y(2),a:U(m,w,!0),A:U(m,w,!1),m:String(w),mm:g.s(w,2,"0"),s:String(this.$s),ss:g.s(this.$s,2,"0"),SSS:g.s(this.$ms,3,"0"),Z:h};return c.replace(Ze,function(T,O){return O||j[T]||h.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(i,u,n){var c,h=g.p(u),m=y(i),w=(m.utcOffset()-this.utcOffset())*r,b=this-m,E=g.m(this,m);return E=(c={},c[A]=E/12,c[$]=E,c[H]=E/3,c[W]=(b-w)/6048e5,c[D]=(b-w)/864e5,c[q]=b/o,c[v]=b/r,c[f]=b/s,c)[h]||b,n?E:g.a(E)},a.daysInMonth=function(){return this.endOf($).$D},a.$locale=function(){return Q[this.$L]},a.locale=function(i,u){if(!i)return this.$L;var n=this.clone(),c=K(i,u,!0);return c&&(n.$L=c),n},a.clone=function(){return g.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},l}(),$e=J.prototype;return y.prototype=$e,[["$ms",d],["$s",f],["$m",v],["$H",q],["$W",D],["$M",$],["$y",A],["$D",_]].forEach(function(l){$e[l[1]]=function(a){return this.$g(a,l[0],l[1])}}),y.extend=function(l,a){return l.$i||(l(a,J,y),l.$i=!0),y},y.locale=K,y.isDayjs=ae,y.unix=function(l){return y(1e3*l)},y.en=Q[P],y.Ls=Q,y.p={},y})})(le);var De=le.exports;const te=Be(De),Ae=t=>te(t,void 0,!0).isValid(),ue=(t,e)=>te(t).isBefore(e),he=(t,e)=>te(t).isAfter(e),Ie=(t,e)=>{e||x("dateBetween");const[s,r]=k(e!=null?e:"");return he(t,s)&&ue(t,r)},qe=(t,...e)=>!!t,Ne=t=>!0,Re=(t,e)=>(e||x("in"),k(e).includes(t)),Ve=(t,e)=>V(t)?Z(t,e):se(t,e),_e=t=>typeof t=="boolean"||typeof t=="string"&&(t=t.toLowerCase(),t==="true"||t==="false"||t==="0"||t==="1"||t==="yes"||t==="no"),Le=(t,e)=>{var[s,r]=k(e!=null?e:"");return V(t)?Z(t,r)&&ee(t,s):!C(t)&&!V(t)?Ie(t,e):(s=Number(s),r=Number(r),t!==void 0&&t!==Number&&t!==""&&C(s)&&C(r)?(t=Number(t),C(t)?me(t,r)&&de(t,s):!1):!1)},Oe=(t,...e)=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),ce=(t,e)=>t&&z(t)?t.length>=Number(e):!1,fe=(t,e)=>t?z(t)?t.length<=Number(e):!1:!0,z=t=>typeof t=="string",ke=t=>/^(ftp|http|https):\/\/[^ "]+$/.test(t),We=t=>typeof t!="string"||t.length===0?!1:/^[A-Z]/.test(t),Qe=t=>typeof t!="string"||t.length===0?!1:/^[a-z]/.test(t),ze=(t,e)=>{e||x("startWith");const s=k(e!=null?e:"");return z(t)?s.some(r=>t.startsWith(r)):!1},Fe=(t,e)=>{e||x("endWith");const s=k(e!=null?e:"");return z(t)?s.some(r=>t.endsWith(r)):!1},He=(t,e)=>{e||x("contains");const s=k(e!=null?e:"");return z(t)?s.some(r=>t.includes(r)):!1},se=(t,e)=>{if(!C(e))throw new Error("The length rule argument must be an integer");return e=parseInt(e),typeof t=="string"||typeof t=="number"?t=t.toString().split(""):typeof t=="object"&&t!==null&&t!==void 0&&(t=[]),Array.isArray(t)?t.length===e:!1},je=t=>{const s=/[A-Z]/.test(t),r=/[a-z]/.test(t),o=/\d/.test(t),d=/[!@#$%^&*(),.?":{}|<>]/.test(t);return!(t.length<8||!s||!r||!o||!d)},de=(t,e)=>{if(V(t))return ee(t,e);if(t==null&&(t=0),!C(e))throw new Error("Min rule parameter must be an integer");return C(t)?Number(t)>=Number(e):ce(t,e)},me=(t,e)=>{if(V(t))return Z(t,e);if(!C(e))throw new Error("Min rule parameter must be an integer");return t==null&&(t=0),C(t)?Number(t)<=Number(e):fe(t,e)},ge=t=>C(t)?Number.isInteger(Number(t)):!1,C=t=>t===""||t===null?!1:t==="0"||t===0||t==="1"||t===1?!0:!isNaN(Number(t))&&typeof t!="boolean"&&typeof t!="object",I=class{static rule(t,e,s){I.addRule(t,e),I.addMessage(t,s!=null?s:"This input is invalide")}static addRule(t,e){I.rules[t]=e}static addMessage(t,e){I.messages[t]=e}static hasRule(t){return t in I.rules}static getRule(t){return I.rules[t]}static getMessage(t){return I.messages[t]}static allRules(){return I.rules}static allMessages(){return I.messages}};let B=I;B.messages={required:"The :field field is required",email:"Please enter a valid email address",maxlength:"The maximum number of characters allowed has been exceeded",minlength:"The minimum number of characters allowed has not been reached",min:"The :field field must be greater than or equal to ':min'",max:"The :field field must be less than or equal to ':max'",string:"Please enter a string of characters",between:"This field value must be in ':min' and ':max'",startWith:"The :field field must be started with ':startWith'",endWith:"The :field field must be ended with ':endWith'",contains:"The :field field must contain the value ':contains'",in:"Please choose a correct value for the :field field",integer:"The :field field must an integer",int:"The :field field must an integer",number:"This field must be a number",numeric:"This field must be a number",file:"This field must be a file",url:"This field must be a valid url",length:"The size of this must be :size",len:"The size of this must be :size",maxFileSize:"The file size must be smaller than :maxFileSize.",minFileSize:"The file size must be larger than :minFileSize.",size:"This field's size should be less than or equal to :size ",boolean:"This field must be a boolean (yes or no) included",startWithUpper:"This field must be started with capitale letter",startWithLower:"This field must be started with capitale letter",nullable:"",password:"The password must be at least 8 characters long and include an uppercase letter, a lowercase letter, a digit, and a special character.",date:"This field must be a valid date",before:"The date must be before (:beforeDate)",after:"The date must be after (:afterDate)"},B.rules={required:qe,email:Oe,maxlength:fe,minlength:ce,min:de,max:me,string:z,between:Le,startWith:ze,endWith:Fe,contains:He,in:Re,integer:ge,int:ge,number:C,numeric:C,url:ke,length:se,len:se,file:V,maxFileSize:Z,minFileSize:ee,size:Ve,boolean:_e,startWithUpper:We,nullable:Ne,startWithLower:Qe,password:je,date:Ae,before:ue,after:he};class ve{constructor(){this.messages=B.allMessages()}getRulesMessages(e){const s=[];for(const r of e)this.messages[r]?s.push(this.messages[r]):s.push("Invalid input");return s}parseMessage(e,s,r,o){let d=[e,...k(o!=null?o:"")],f=r;return f.includes(":field")||(d=d.slice(1)),f=this.replace(r,f,d),f}setMessages(e){return this.messages=e,this}replace(e,s,r){var d;const o=e.match(/:[a-zA-Z]+/g);if(o)for(let f=0;f<o.length;f++){const v=(d=r[f])!=null?d:"";s=s.replace(o[f],v)}return s}}class xe{constructor(e,s){this.rules=e,this.messages=s,this.compensateMessages(),this.sanitizeMessage()}compensateMessages(){var s;const e=this.rules.length;if(this.messages.length!==e)for(let r=0;r<this.rules.length;r++){const o=this.convertAcoladeGroupToArray((s=this.messages[r])!=null?s:"");for(const d of o)this.messages[d]=this.messages[r]}}sanitizeMessage(){const e=/{(\d+(?:,\s*\d+)*)}/g;this.messages=this.messages.map(s=>s.replace(e,""))}convertAcoladeGroupToArray(e){var o;const s=/{(\d+(?:,\s*\d+)*)}/g;return(o=[...e.matchAll(s)].map(d=>d[1].split(",").map(f=>parseInt(f.trim())))[0])!=null?o:[]}getMessages(){return this.messages}}class Pe{constructor(e,s,r=!0){this.emitEvent=r,this.config=p,this.feedbackElement=null,this.rules=[],this.messages={},this._errors=[],this.name="",this.showMessage="first",this.showMessages=["first","full","last"],this.validClass="",this.invalidClass="is-invalid",this.events=["blur","input","change"],this.setConfig(s),this.setInputElement(e),this.setInputRules(),this.setInputName(),this.setFeedbackElement(),this.setShowMessage(),this.setInputValidationClass(),this.getElementQvMessages(),this.setEvent()}setInputRules(){var s;let e=(s=this.inputElement.dataset.qvRules)!=null?s:"";if(e)for(const r of e.split("|"))if(B.hasRule(S(r).ruleName))this.rules.push(r);else throw new Error(`The validation rule ${r} is not supported by QuickV`);return this}setEvent(){const e=this.inputElement.dataset.qvEvents;e&&(this.events=e.split("|"))}setInputElement(e){if(!(e instanceof HTMLElement)){const s=document.querySelector(e);s&&(e=s)}if(!(e instanceof HTMLElement))throw new Error("The 'inputElement' parameter must be of type HTMLElement.");this.inputElement=e}setInputName(){let e=this.inputElement.name;if(this.inputElement.dataset.qvName&&(e=this.inputElement.dataset.qvName),e==null||typeof e=="string"&&e.length<0)throw new Error("The input name could not be empty or null");this.name=e}set errors(e){var s;e&&(this._errors=(s=e[this.name])!=null?s:[]),this.showErrorMessages()}setFeedbackElement(){let s=this.inputElement.parentElement,r=null;for(;s&&!r;)r=s.querySelector(`[data-qv-feedback='${this.name}']`),s=s.parentElement;this.feedbackElement=r}showErrorMessages(){if(this.feedbackElement instanceof HTMLElement,this.feedbackElement instanceof HTMLElement){let e="";Array.isArray(this._errors)&&(e=this._errors[0],this.showMessage=="full"?e=this._errors.join("<br>"):this.showMessage=="last"&&this._errors.length>0&&(e=this._errors[this._errors.length-1])),this.feedbackElement.innerHTML=e!=null?e:""}}setShowMessage(){var e;this.showMessage=(e=this.inputElement.dataset.qvShow)!=null?e:"first",this.showMessage=this.showMessages.includes(this.showMessage)?this.showMessage:"first"}setInputValidationClass(){var e,s,r,o;this.invalidClass=(e=this.config.invalidClass)!=null?e:"",this.validClass=(s=this.config.validClass)!=null?s:"",this.invalidClass=(r=this.inputElement.dataset.qvInvalidClass)!=null?r:this.invalidClass,this.validClass=(o=this.inputElement.dataset.qvValidClass)!=null?o:this.validClass}setValidationClass(e){const s=o=>{o.length>0&&this.inputElement.classList.remove(o)},r=o=>{o.length>0&&this.inputElement.classList.add(o)};e?(this.invalidClass.split(" ").forEach(s),this.validClass.split(" ").forEach(r),this.inputElement.setAttribute("data-qv-valid","1")):(this.validClass.split(" ").forEach(s),this.invalidClass.split(" ").forEach(r),this.inputElement.setAttribute("data-qv-valid","0"))}getElementQvMessages(){var r;const e=this.inputElement.dataset.qvMessages;let s={};for(let o=0;o<this.rules.length;o++){let d=(r=e==null?void 0:e.split("|").map(q=>q.trim()))!=null?r:[];d&&(d=new xe(this.rules,d).getMessages());const f=d!==void 0?d[o]:"",v=new ie().getRule(this.rules[o]).ruleName;typeof f=="string"&&f.length>0?s[v]=f:s[v]=B.getMessage(v)}this.messages=s}getName(){return this.name}getValue(){return this.inputElement.type.toLowerCase()=="file"?this.inputElement.files?this.inputElement.files[0]:null:this.inputElement.value}setConfig(e){this.config=p,e&&typeof e=="object"&&(this.config=R(R({},this.config),e))}}const pe=class{constructor(){this.errors={}}static make(t,e,s){const r=new pe;for(const[o,d]of Object.entries(t)){const f=e[o],v=new ie;if(!Array.isArray(d))throw new Error("The validator input must be an array");if(!v.validate(f,d)){const D=s!=null?s:new ve,W=[];for(const $ of v.getErrors()){const H=d.find(A=>A.startsWith($));if(H){const _=v.getRule(H).params,G=D.parseMessage(o,H,D.getRulesMessages([$])[0],_);W.push(G)}}r.errors[o]=W}}return r}static valid(t,e){if(!Array.isArray(e))throw new Error("The validator input must be an array");const s=new ie;return s.validate(t,e),s.isValid()}fails(){return Object.keys(this.errors).length>0}getMessages(){return this.errors}isValid(){return!this.fails()}rule(t,e,s){B.rule(t,e,s)}};let be=pe;be.rulesBag=B.allRules();class Ye extends Pe{constructor(e,s,r=!0){super(e,s,r)}validate(){const e=this.valid();return this.setValidationClass(e),this.errors=this.validator.getMessages(),this.emitChangeEvent(),e}getRules(){return this.rules}hasRules(){return this.rules.length>0}getMessages(){return this.messages}valid(){const e={},s={};e[this.name]=this.getValue(),s[this.name]=this.rules;const r=new ve;return r.setMessages(this.messages),this.validator=be.make(s,e,r),this.validator.isValid()}emitChangeEvent(){this.emitEvent&&this.inputElement.dispatchEvent(new CustomEvent("qv.input.validated",{detail:{rules:this.rules,input:{},element:this.inputElement},bubbles:!0}))}getErrors(){return this._errors}fails(){return!this.valid()}}class F extends Ye{constructor(e,s,r=!0){super(e,s,r)}init(){this.events.forEach(e=>{this.inputElement.addEventListener(e,()=>{this.validate()})})}rule(e,s,r){B.rule(e,s,r)}}class re{constructor(e){this.inputs={},this.config=p,this.setContainer(e)}setContainer(e){if(!(e instanceof HTMLElement)){const r=document.querySelector(e);r&&(e=r)}if(!(e instanceof HTMLElement))throw new Error("The 'container' parameter must be of type HTMLElement.");this.container=e;const s=this.container.querySelector("[data-qv-submit]");s&&(this.submitButton=s)}init(e){this.setConfig(e),this.disableButton(),this.container.querySelectorAll("[data-qv-rules]").forEach(s=>{new F(s,this.config).init()}),this.handle(),this.onSubmit(),this.setInputs()}disableButton(){this.submitButton&&this.submitButton.setAttribute("disabled","true")}enableButton(){this.submitButton&&this.submitButton.removeAttribute("disabled")}handle(){const e=()=>{this.isValid()?this.enableButton():this.disableButton()};["change","qv.input.validated"].forEach(s=>{this.container.addEventListener(s,r=>{r.stopPropagation(),e(),this.setInputs()})})}isValid(){return[...this.container.querySelectorAll("[data-qv-rules]")].every(s=>new F(s).valid())}onSubmit(){this.container.addEventListener("submit",e=>{this.container.querySelectorAll("[data-qv-rules]").forEach(s=>{new F(s,this.config,!1).validate()}),this.isValid()||e.preventDefault()})}setInputs(){this.container.querySelectorAll("[data-qv-rules]").forEach(e=>{const s=new F(e);this.inputs[s.getName()]=s.getValue()})}rule(e,s,r){B.rule(e,s,r)}setConfig(e){this.config=p,e&&typeof e=="object"&&(this.config=R(R({},this.config),e))}}class we{constructor(){this.config=p}init(e){this.setConfig(e),document.querySelectorAll("form").forEach(s=>{new re(s).init(this.config)})}rule(e,s,r){B.rule(e,s,r)}setConfig(e){this.config=p,e&&typeof e=="object"&&(this.config=R(R({},this.config),e))}}class ie{constructor(){this.rulesBag=B.allRules(),this.errors=[]}validate(e,s){if(!Array.isArray(s))throw new Error("The rule provided must be an array of Rule");return s.forEach(r=>{const{ruleName:o,params:d}=this.getRule(r),f=this.rulesBag[o];if(!f)throw new Error(`The rule ${o} is not defined`);f(e,d)||this.errors.push(o)}),!this.hasErrors()}getRule(e){return S(e)}getErrors(){return this.errors}hasErrors(){return this.errors.length>0}isValid(){return!this.hasErrors()}setRules(e){this.rulesBag=R(R({},this.rulesBag),e)}getRules(){return this.rulesBag}}typeof window!="undefined"&&(window.QvInput=(ye=window.QvInput)!=null?ye:F,window.QvForm=(Me=window.QvForm)!=null?Me:re,window.Quickv=(Ee=window.Quickv)!=null?Ee:we),M.Quickv=we,M.QvConfig=p,M.QvForm=re,M.QvInput=F,Object.defineProperty(M,Symbol.toStringTag,{value:"Module"})});
